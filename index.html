<!DOCTYPE html>
<html lang="zh_CN">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
  <title>2022全国两会</title>
  <!-- CSS 文件 -->
  <link href="./static/css/swiper-bundle.css" type="text/css"  rel="stylesheet">
  <link href="./static/css/base.css" type="text/css"  rel="stylesheet">
</head>

<body>
  <div class="mobile-rotate__wrapper">
    <div class="rotate-container">
      <img src="./static/images/icon-rotate.png" />
      <p>请横屏浏览</p>
    </div>
  </div>
  <div class="page-npc">
    <!---主轮换-->
    <div class="swiper-container swiper-container--main">
      <div class="swiper-wrapper">
        <!--首屏-->
        <div class="swiper-slide">
          <div class="slide-wrapper slide-wrapper--first">
            <div class="slide-container">
              <div class="image-section">
                <div class="image-npc">
                  <img src="./static/images/npc.png" alt="两会时间" />
                </div>
                <div class="image-xdd">
                  <img src="./static/images/xdd.png"/>
                </div>
              </div>
              <div class="link-container">
                <a href="" class="link-item">· 习近平主持中央政治局第二十次学习</a>
                <a href="" class="link-item active">· 共商国事，习近平在全国两会上，两会新语，总书记的民法典</a>
                <a href="" class="link-item">· 第一观察｜习近平“2022两会时间”不寻常</a>
                <a href="" class="link-item">· 非常两会，习近平生动诠释这一理念 向世传递这些重要信息</a>
              </div>
            </div>
          </div>
        </div>

        <div class="swiper-slide">
          <div class="slide-wrapper">
            <div class="slide-container">
              <div class="title">十三届全国人大四次会议在京开幕</div>
              <div class="image">
                <img src="./static/images/img-0304.jpg" />
              </div>
              <div class="content">
                3月4日，中国人民政治协商会议第十三届全国委员会第四次会议在北京人民大会堂开幕。这是习近平、李克强、栗战书、王沪宁、赵乐际、韩正、王岐山在主席台就座，汪洋代表政协第十三届全国委员会常务委员会向大会报告工作。
              </div>
            </div>
          </div>
        </div>

        <div class="swiper-slide">
          <div class="slide-wrapper">
            <div class="slide-container">
              <div class="title">习近平参加内蒙古代表团审议</div>
              <div class="image">
                <img src="./static/images/img-0304.jpg" />
              </div>
              <div class="content">
                3月5日，中共中央总书记、国家主席、中央军委主席习近平参加十三届全国人大四次会议内蒙古代表团的审议。
              </div>
              <ul class="headline">
                <li><a href="">微镜头|"'绿水青山就是金山银山'是增值的"</a></li>
                <li><a href="">微镜头|"这个账总是要算的"</a></li>
                <li><a href="">第四次参加内蒙古代表团审议 习近平提到这些关键点</a></li>
              </ul>
            </div>
          </div>
        </div>

        <div class="swiper-slide">
          <div class="slide-wrapper">
            <div class="slide-container">
              <div class="title">十三届全国人大四次会议在京开幕-06</div>
              <div class="image">
                <img src="./static/images/img-0304.jpg" />
              </div>
              <div class="content">
                3月4日，中国人民政治协商会议第十三届全国委员会第四次会议在北京人民大会堂开幕。这是习近平、李克强、栗战书、王沪宁、赵乐际、韩正、王岐山在主席台就座，汪洋代表政协第十三届全国委员会常务委员会向大会报告工作。
              </div>
            </div>
          </div>
        </div>

        <div class="swiper-slide">
          <div class="slide-wrapper">
            <div class="slide-container">
              <div class="title">十三届全国人大四次会议在京开幕-07</div>
              <div class="image">
                <img src="./static/images/img-0304.jpg" />
              </div>
              <div class="content">
                3月4日，中国人民政治协商会议第十三届全国委员会第四次会议在北京人民大会堂开幕。这是习近平、李克强、栗战书、王沪宁、赵乐际、韩正、王岐山在主席台就座，汪洋代表政协第十三届全国委员会常务委员会向大会报告工作。
              </div>
            </div>
          </div>
        </div>

        <div class="swiper-slide">
          <div class="slide-wrapper">
            <div class="slide-container">
              <div class="title">十三届全国人大四次会议在京开幕-08</div>
              <div class="image">
                <img src="./static/images/img-0304.jpg" />
              </div>
              <div class="content">
                3月4日，中国人民政治协商会议第十三届全国委员会第四次会议在北京人民大会堂开幕。这是习近平、李克强、栗战书、王沪宁、赵乐际、韩正、王岐山在主席台就座，汪洋代表政协第十三届全国委员会常务委员会向大会报告工作。
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>

    <div class="slide-date__wrapper">
      <div class="line"></div>
      <div class="arrow">
        <img src="./static/images/icon-arrow-down.png" />
      </div>
      <div class="image">
        <img src="./static/images/npc2.png" />
      </div>
      <div class="date">
        <div class="month">03月</div>
        <div class="swiper-container swiper-container--day">
          <div class="swiper-wrapper"></div>
        </div>
        <div class="unit">日</div>
      </div>
      <div class="arrow">
        <img src="./static/images/icon-arrow-down.png" />
      </div>
      <div class="line2"></div>
    </div>

    <a href="javascript:void(0);" class="calendar-icon">
      <img src="./static/images/icon-calendar.png" />
    </a>
    <div class="swiper-calendar hidden">
      <a class="calendar-arrow" href="javascript:void(0);">
        <img src="./static/images/icon-arrow-down2.png" />
      </a>
    </div>

  </div>
  <!-- jQuery first, then Popper.js, then Bootstrap JS -->
  <script type="text/javascript" src="./static/js/jquery.min.js"></script>
  <script type="text/javascript" src="./static/js/swiper-bundle.js"></script>
  <script type="text/javascript">
    // 日历，天
    var calendar = ['04', '05', '06', '07', '08'];

    // swiper实例对象
    var npcSwiper = null;
    var dateSwiper = null;

    // 渲染日历
    var renderCalendarPagination = function() {
      var _calendarHtml = '';
      for(var i=0; i<calendar.length; i++) {
        _calendarHtml += '<a class="calendar-date" data-idx="'+ i +'" href="javascript:void(0);">2022年3月'+ calendar[i] +'日</a>';
      }
      $('.swiper-calendar .calendar-arrow').before(_calendarHtml);
    }
    // 绑定行为
    var hookSlideEvent = function() {
      $('.swiper-calendar .calendar-date')
        .unbind()
        .bind('click', function() {
          $(this)
            .siblings().removeClass('active')
            .end().addClass('active');
          
          var idx = parseInt($(this).data('idx'));
          // 更新日期
          dateSwiper.slideTo(idx);
          // 切换
          npcSwiper.slideTo(idx + 1);
        });
    }
    // 初始化日期实例
    var initDateSwiper = function() {
      if (dateSwiper) {
        return;
      }
      dateSwiper = new Swiper('.swiper-container--day', {
        direction: 'vertical',
        mousewheelControl: false,
        keyboardControl: false,
        loop: false,
        autoplay: false,
        speed: 800
      });
      // 动态添加slide
      for(var i=0; i<calendar.length; i++) {
        dateSwiper.appendSlide('<div class="swiper-slide">'+ calendar[i] +'</div>');
      }
      // 绑定事件
      hookSlideEvent();
    }

    var hideRotateWrapper = function() {
      $('.mobile-rotate__wrapper').hide();
    }


    $(function() {
      if (/Android|iPhone/i.test(navigator.userAgent) && window.orientation === 0) {
        $('body').css({
          width: window.innerHeight,
          height: window.innerWidth,
          transform: 'rotate(90deg)',
          transformOrigin: '0 0',
          marginLeft: window.innerWidth
        });
      }
      window.onorientationchange = function() {
        window.location.reload();
      }
      $('.mobile-rotate__wrapper').on('touchstart', function(e) {
        hideRotateWrapper();
        e.stopPropagation();
      });
      if (window.orientation !== 0) {
        hideRotateWrapper();
      }
      setTimeout(function() {
        hideRotateWrapper();
      }, 2000);

      // 渲染日历
      renderCalendarPagination();

      var $calendarIcon = $('.calendar-icon');
      var $swiperCalendar = $('.swiper-calendar');
      var $calendarDate =  $('.swiper-calendar .calendar-date');
      var $slideDateWrapper = $('.slide-date__wrapper');

      // 初始化轮换效果
      npcSwiper = new Swiper('.swiper-container--main', {
        direction: 'vertical',
        autoplay: false,
        loop: false, // 循环模式选项
        mousewheelControl: true,
        keyboardControl: true,
        speed: 600,
        on: {
          init: function(swiper) {
            console.log('npcSwiper init.');
            initDateSwiper();
          },
          slideChangeTransitionStart: function(swiper) {
            if (swiper.activeIndex === 0) {
              $calendarIcon.hide();
              $swiperCalendar.hide();
              $slideDateWrapper.css({ visibility: 'hidden' });
            } else {
              $slideDateWrapper.css({ visibility: 'visible' });
              if (dateSwiper) {
                dateSwiper.slideTo(swiper.activeIndex - 1);
              }
              $calendarDate
                .eq(swiper.activeIndex - 1).addClass('active')
                .siblings().removeClass('active');
            }
          },
          slideChangeTransitionEnd: function(swiper) {
            if (swiper.activeIndex > 0) {
              $calendarIcon.show();
            } else {
              $calendarIcon.hide();
              $swiperCalendar.hide();
              $slideDateWrapper.css({ visibility: 'hidden' });
            }
          }
        }
      });
      // 日历点击事件
      $calendarIcon.click(function() {
        $swiperCalendar.fadeIn(400);
        $(this).hide();
      });
      // 隐藏日历事件
      $('.swiper-calendar .calendar-arrow').click(function() {
        $swiperCalendar.hide();
        $calendarIcon.fadeIn(400);
      });
    });
  </script>
</body>
</html>